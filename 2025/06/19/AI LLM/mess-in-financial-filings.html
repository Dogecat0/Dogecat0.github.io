<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0HENBHMXMT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0HENBHMXMT');
</script>
<!-- End Google Analytics -->

  
  <title>Mess in SEC Financial Filings: A new Challenge of Data Extraction | Zhicheng&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;0,600;0,800;1,200;1,400;1,600;1,800&display=swap" rel="stylesheet">
  <meta name="description" content="In the world of financial data extraction, the challenge of parsing and interpreting complex documents is ever-present. As I continue to refine my financial analysis tool, I’ve encountered a new set o">
<meta property="og:type" content="article">
<meta property="og:title" content="Mess in SEC Financial Filings: A new Challenge of Data Extraction">
<meta property="og:url" content="https://zhicheng-wang.com/2025/06/19/AI%20LLM/mess-in-financial-filings.html">
<meta property="og:site_name" content="Zhicheng&#39;s Blog">
<meta property="og:description" content="In the world of financial data extraction, the challenge of parsing and interpreting complex documents is ever-present. As I continue to refine my financial analysis tool, I’ve encountered a new set o">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-06-19T22:15:27.000Z">
<meta property="article:modified_time" content="2025-06-25T00:03:57.843Z">
<meta property="article:author" content="Zhicheng Wang">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="Data Extraction">
<meta property="article:tag" content="Financial Filings">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Zhicheng's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/icons/favicon.ico">
  
  
<link rel="stylesheet" href="/css/output.css">

  
    <link rel="stylesheet" href="/css/prism.css">
    <script src="/js/prism.js"></script>
  
  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

  <body class="body">
    <div id="container" class="container">
      <div id="wrap">
        <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="header-title-group inner">
      <p id="logo-wrap" class="header-title">
        Zhicheng&#39;s Blog
        <!-- <a href="/" id="logo">Zhicheng&#39;s Blog</a> -->
      </p>
      
        <p id="subtitle-wrap" class="header-subtitle">
          A Chronicles of a Self-taught Programmer: Learn to Debug Life
          <!-- <a href="/" id="subtitle">A Chronicles of a Self-taught Programmer: Learn to Debug Life</a> -->
        </p>
      
      
        <p id="description-wrap" class="header-description">
          Welcome to my blog!
This blog chronicles my personal exploration into the worlds of coding and life itself.
Here, I share the things I encounter while learning to program.
Think of it as me trying to debug life while getting better at debugging code.
Fueled by my own insatiable curiosity (and LLM&#39;s endless patience), bolstered by my humble attitude of learning (with millions of searches on Google),
I&#39;m pretty confident this debugging process will be wrapped up by the end of this century.

✉️: zcmmwang@gmail.com

          <!-- <a href="/" id="description">Welcome to my blog!
This blog chronicles my personal exploration into the worlds of coding and life itself.
Here, I share the things I encounter while learning to program.
Think of it as me trying to debug life while getting better at debugging code.
Fueled by my own insatiable curiosity (and LLM&#39;s endless patience), bolstered by my humble attitude of learning (with millions of searches on Google),
I&#39;m pretty confident this debugging process will be wrapped up by the end of this century.

✉️: zcmmwang@gmail.com
</a> -->
        </p>
      
    </div>
    <div id="header-inner" class="nav-menu inner">
      <nav id="main-nav" class="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      
    <div id="site_search" class="site-search">
     <div class="form-group" class="site-search-input">
      <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
     </div>  
    <div id="local-search-result" class="local-search-result"></div>
    </div>
  
    </div>
  </div>
</header>

        <div class="outer">
          <section class="post-container" id="main"><article
  id="post-AI LLM/mess-in-financial-filings"
  class="h-entry article article-type-post"
  itemprop="blogPost"
  itemscope
  itemtype="https://schema.org/BlogPosting"
>
  <div class="article-meta">
    

<p class="article-date">
  Published: <time class="dt-published" datetime="2025-06-19T22:15:27.000Z" itemprop="datePublished">2025-06-19</time>
  <br>
  
  Updated: <time class="dt-published" datetime="2025-06-25T00:03:57.843Z" itemprop="datePublished">2025-06-25</time>
  
</p>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/AI-Projects/">AI Projects</a>
  </div>

  </div>
  <hr />
  <div class="article-inner">
     
    <header class="article-header">
      
  
    <h1 class="p-name article-title" itemprop="headline name">
      Mess in SEC Financial Filings: A new Challenge of Data Extraction
    </h1>
  

    </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
       <p>In the world of financial data extraction, the challenge of parsing and interpreting complex documents is ever-present. As I continue to refine my financial analysis tool, I’ve encountered a new set of challenges that highlight the messy nature of financial filings. This post delves into these issues and how they impact the accuracy and reliability of data extraction.</p>
<span id="more"></span>
<h3 id="The-Messy-Reality-of-Financial-Filings">The Messy Reality of Financial Filings</h3>
<p>Today I faced a particularly messy issue while extracting 10-K financials from a company’s filings. (Yes, 10-Qs don’t have such issue) There is a form called XBRL, which is an XML-based format used for financial reporting. While it is designed to be machine-readable, the reality is that these filings can be incredibly complex and inconsistent.</p>
<p>There is a specific case where you want to extract the labels from the Index of the XBRL document. These labels are supposed to be standardized like <code>concept</code>, <code>label</code>, <code>level</code>, <code>abstract</code>, <code>dimension</code>, and <code>date</code> which in this case is in <code>yy-mm-dd</code> format.</p>
<p>Ideal format:</p>
<pre class="line-numbers language-none"><code class="language-none">Index([&#39;concept&#39;, &#39;label&#39;, &#39;2025-03-31&#39;, &#39;level&#39;, &#39;abstract&#39;,
       &#39;dimension&#39;],
      dtype&#x3D;&#39;object&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>But in practice, the labels can be messy. For example, I encountered a case where the label for the date was formatted as <code>2025-03-31</code> but also had an additional label <code>2024-12-31</code> that was not in the expected format. And there were also labels like <code>2025-03-31 (Q1)</code> which were not in the expected format either.</p>
<p>Real format copied from my logs:</p>
<pre class="line-numbers language-none"><code class="language-none">Columns in statement:[&#39;concept&#39;, &#39;label&#39;, &#39;2022-12-31&#39;, &#39;2021-12-31&#39;, &#39;2020-12-31&#39;, &#39;level&#39;, &#39;abstract&#39;, &#39;dimension&#39;]
Columns in statement: [&#39;concept&#39;, &#39;label&#39;, &#39;2022-06-30&#39;, &#39;level&#39;, &#39;abstract&#39;, &#39;dimension&#39;]
Columns in statement: [&#39;concept&#39;, &#39;label&#39;, &#39;2022-06-30 (Q2)&#39;, &#39;2022-06-30&#39;, &#39;level&#39;, &#39;abstract&#39;, &#39;dimension&#39;]
Columns in statement: [&#39;concept&#39;, &#39;label&#39;, &#39;2022-12-31&#39;, &#39;2021-12-31&#39;, &#39;level&#39;, &#39;abstract&#39;, &#39;dimension&#39;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Temporary-Solution-and-Manual-Intervention">Temporary Solution and Manual Intervention</h3>
<p>The solution to this problem is not straightforward. It requires a combination of heuristics and manual intervention to clean up the data. The steps I took at this moment:</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Columns in statement:"</span><span class="token punctuation">,</span> statement<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

 <span class="token comment"># The columns are expected to be in the order:</span>
 <span class="token comment"># 'concept', 'label', &lt;date_columns...>, 'level', 'abstract', 'dimension'</span>
 <span class="token comment"># We want to keep the first date column, which represents the most recent period.</span>

 <span class="token comment"># Find the index of the 'level' column. If not found, this will raise a KeyError,</span>
 <span class="token comment"># which is caught below.</span>
 level_index <span class="token operator">=</span> statement<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>get_loc<span class="token punctuation">(</span><span class="token string">"level"</span><span class="token punctuation">)</span>

 <span class="token comment"># The date columns are between 'label' (index 1) and 'level'.</span>
 <span class="token comment"># So they start at index 2.</span>
 date_columns <span class="token operator">=</span> statement<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span>level_index<span class="token punctuation">]</span>

 <span class="token keyword">if</span> <span class="token keyword">not</span> date_columns<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
     <span class="token comment"># The first date column is the most recent period, which is what we want.</span>
     latest_date_col <span class="token operator">=</span> date_columns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
     columns_to_keep <span class="token operator">=</span> <span class="token punctuation">[</span>
         <span class="token string">"concept"</span><span class="token punctuation">,</span>
         <span class="token string">"label"</span><span class="token punctuation">,</span>
         latest_date_col<span class="token punctuation">,</span>
         <span class="token string">"level"</span><span class="token punctuation">,</span>
         <span class="token string">"abstract"</span><span class="token punctuation">,</span>
         <span class="token string">"dimension"</span><span class="token punctuation">,</span>
     <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>At this point, I had to manually inspect the columns and decide which ones to keep. This is not ideal, but it is a reality of working with messy financial data and the more true fact is this situation may not be the last time I encounter such inconsistencies.</p>
<p>The best way to handle this is probably to select the biggest date column and then check if the other date columns are in the expected format. If they are not, we can either drop them or keep them for further analysis. And there is also one exception where the date column is in the format <code>2025-03-31 (Q1)</code>. In this case, we have to extract the date part from here instead of the similar column <code>2025-03-31</code> as the data in this column is not the expected ones.</p>
<h3 id="Final-Thoughts">Final Thoughts</h3>
<p>After roughly 2 hours of debugging and manual intervention, I was able to extract the right financials from the filings. Again, why 10-Qs don’t have such issue but only 10-Ks? I don’t know. But this seems become a norm for me to encounter while dealing with financial data.</p>
 
    </div>
    <footer class="article-footer">
      <button
        title="Share"
        data-url="https://zhicheng-wang.com/2025/06/19/AI%20LLM/mess-in-financial-filings.html"
        data-id="cmcfbzdr5000967692ca1fi1y"
        data-title="Mess in SEC Financial Filings: A new Challenge of Data Extraction"
        class="article-share-link"
        type="button"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="1.2em"
          viewBox="0 0 448 512"
        >
          <path
            fill="#ffffff"
            d="M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"
          />
        </svg>
      </button>
        
  <ul class="article-tag-list">
    
      <li class="article-tag-list-item"><a href="/tags/Python/">#Python</a></li>
    
      <li class="article-tag-list-item"><a href="/tags/Data-Extraction/">#Data Extraction</a></li>
    
      <li class="article-tag-list-item"><a href="/tags/Financial-Filings/">#Financial Filings</a></li>
    
  </ul>

    </footer>
  </div>
   
<nav id="article-nav" class="article-nav">
  
    <a href="/2025/06/22/AI%20LLM/illustion-of-quaterly-data.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The Illusion of Quarterly Data: Correctly Calculating Financials from SEC Filings
        
      </div>
    </a>
  
  
    <a href="/2025/06/18/Reading/think-fast-and-slow.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Reading Notes: Thinking, Fast and Slow by Daniel Kahneman</div>
    </a>
  
</nav>
 
</article>

 
</section>
           <aside class="sidebar" id="sidebar">
  
    
  <div class="widget-wrap">
    <p class="widget-title">Categories</p>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI-Projects/">AI Projects</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading/">Reading</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <p class="widget-title">Recent Posts</p>
    <div class="widget">
      <ul>
        
          <li class="recent-post-list-item">
            <a href="/2025/06/24/AI%20LLM/containerization.html">Containerization: A Case Study in Environment and Configuration Management</a>
          </li>
        
          <li class="recent-post-list-item">
            <a href="/2025/06/22/AI%20LLM/illustion-of-quaterly-data.html">The Illusion of Quarterly Data: Correctly Calculating Financials from SEC Filings</a>
          </li>
        
          <li class="recent-post-list-item">
            <a href="/2025/06/19/AI%20LLM/mess-in-financial-filings.html">Mess in SEC Financial Filings: A new Challenge of Data Extraction</a>
          </li>
        
          <li class="recent-post-list-item">
            <a href="/2025/06/18/Reading/think-fast-and-slow.html">Reading Notes: Thinking, Fast and Slow by Daniel Kahneman</a>
          </li>
        
          <li class="recent-post-list-item">
            <a href="/2025/06/14/AI%20LLM/persistent-database.html">Refactoring for Resilience: Introducing a Database Caching Layer</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
          
        </div>
        <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner footer-info">
      
      &copy; 2025 Zhicheng Wang<br>
      <div>
        Powered by 
        <a href="https://hexo.io/" target="_blank">Hexo</a>
      </div>
    </div>
  </div>
</footer>

      </div>
      <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav> 


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>


<script src="/js/search.js"></script>








<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<!-- 
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>
 -->


   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


    </div>
  </body>
</html>
